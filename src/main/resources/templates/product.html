<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - E-Commerce</title>
    <link rel="stylesheet" href="/styles.css">
    <script src="/script.js" defer></script>
</head>
<body>
<header class="lux-header">
    <div class="lux-logo">Bloom Essence ðŸŒ¸</div>
    <nav class="lux-nav">
        <a th:href="@{/}">Home</a>
        <a th:href="@{/products}">Products</a>
        <a th:href="@{/order/cart}">Cart</a>
        <span th:if="${session.user == null}">
            <a th:href="@{/login}">Login</a>
            <a th:href="@{/register}">Register</a>
        </span>
        <span th:if="${session.user != null}">
            <a th:href="@{/logout}">Logout</a>
        </span>
    </nav>
</header>

<section class="product-grid">
    <div class="product-card" th:each="p : ${products}">
        <!-- âœ… Fixed image path -->
        <img th:src="@{/Images/{img}(img=${p.image})}" alt="Product Image">
        <h3 th:text="${p.name}"></h3>
        <p th:text="${p.description}"></p>
        <p class="price">â‚¹ <span th:text="${p.price}"></span></p>

        <form th:action="@{/order/add}" method="post">
            <input type="hidden" name="productId" th:value="${p.id}">
            <button type="submit"
                    class="add-to-cart"
                    th:attr="data-product-id=${p.id}, data-logged-in=${session.user != null}">
                Add to Cart
            </button>
        </form>
    </div>
</section>

<footer class="lux-footer">
    Â© 2025 Bloom Essence - Spring & Autumn Collection
</footer>
</body>
</html>
